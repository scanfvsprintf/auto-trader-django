# 组合回测配置记忆功能使用说明

## 功能概述

组合回测配置记忆功能允许用户保存和重用之前的回测配置，避免重复填写复杂的表单。系统会自动保存成功回测的配置，并支持手动保存和加载配置。

## 主要特性

### 1. 自动保存
- 每次成功回测后，系统会自动保存当前配置
- 自动生成配置名称（基于日期、组合类型和标的数量）
- 最多保存100个配置，超出后自动删除最旧的配置

### 2. 手动保存
- 点击"保存配置"按钮可以手动保存当前配置
- 支持自定义配置名称
- 显示配置预览信息

### 3. 配置加载
- 点击"加载配置"按钮打开配置选择器
- 支持搜索配置名称
- 显示配置的详细信息（类型、标的数量、最后使用时间）
- 支持删除不需要的配置

### 4. 配置管理
- 按最后使用时间排序
- 支持清空所有配置
- 显示配置统计信息

## 使用方法

### 保存配置
1. 填写完整的回测配置
2. 点击工具栏中的"保存配置"按钮
3. 输入配置名称（可选，系统会自动生成）
4. 点击"保存配置"确认

### 加载配置
1. 点击工具栏中的"加载配置"按钮
2. 在配置列表中选择需要的配置
3. 点击配置项即可自动填充表单
4. 可以搜索配置名称快速找到目标配置

### 管理配置
- 在配置列表中点击"删除"按钮可以删除单个配置
- 点击"清空所有"按钮可以删除所有配置
- 配置会按最后使用时间自动排序

## 移动端适配

- 配置选择器在移动端使用全屏显示
- 工具栏在移动端使用垂直布局
- 配置列表在移动端优化了触摸交互
- 按钮和文字大小针对移动端进行了调整

## 技术实现

### 数据存储
- 使用localStorage存储配置数据
- 每个配置包含：ID、名称、配置数据、创建时间、最后使用时间
- 自动限制存储数量，防止localStorage溢出

### 数据结构
```javascript
{
  id: "唯一标识符",
  name: "配置名称",
  config: {
    portfolioItems: [...], // 组合标的
    rebalanceStrategy: {...}, // 再平衡策略
    initialCapital: 100000, // 初始资金
    monthlyWithdrawal: 0, // 月度提取
    commissionRate: "0.1", // 手续费率
    dateRange: {...} // 日期范围
  },
  createdAt: "2025-09-25T...", // 创建时间
  lastUsed: "2025-09-25T..." // 最后使用时间
}
```

### 组件架构
- `PortfolioConfigManager.vue`: 配置管理UI组件
- `portfolioConfigManager.js`: 配置管理工具类
- 集成到 `PortfolioConfigForm.vue` 中
- 通过事件与父组件 `PortfolioBacktest.vue` 通信

## 注意事项

1. 配置数据存储在浏览器本地，清除浏览器数据会丢失所有配置
2. 配置名称建议使用有意义的描述，便于后续查找
3. 系统会自动检测重复配置，避免重复保存
4. 配置加载时会验证数据完整性，确保表单正常工作
